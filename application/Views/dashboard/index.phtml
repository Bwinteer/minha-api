<!DOCTYPE html>
<html>
<head>
    <title>Teste da API</title>
</head>
<body>
    <h1>Teste da API</h1>
    
    <h2>Usuários</h2>
    <button onclick="listarUsuarios()">Listar Usuários</button>
    <button onclick="criarUsuario()">Criar Usuário</button>
    <button onclick="buscarUsuario()">Buscar Usuário ID 1</button>

    <h2>Projetos</h2>
    <button onclick="listarProjetos()">Listar Projetos</button>
    <button onclick="criarProjeto()">Criar Projeto</button>
    <button onclick="buscarProjeto()">Buscar Projeto ID 1</button>

    <h2>Tarefas</h2>
    <button onclick="listarTarefas()">Listar Tarefas</button>
    <button onclick="criarTarefa()">Criar Tarefa</button>
    <button onclick="buscarTarefa()">Buscar Tarefa ID 1</button>

    <div id="resultado" class="resultado">
        Resultado aparecerá aqui...
    </div>

    <script>
        function listarUsuarios() {
            fetch('/usuarios')
                .then(r => r.json())
                .then(d => mostrarResultado('Usuários', d));
        }

        function criarUsuario() {
            const dados = {
                nome: 'Luiz Carlos',
                email: 'luiz0@api.com',
                telefone: '(11) 99999-9999'
            };

            fetch('/usuarios/criar', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(dados)
            })
            .then(r => r.json())
            .then(d => mostrarResultado('Usuário criado', d));
        }

        function buscarUsuario() {
            fetch('/usuarios?id=1')
                .then(r => r.json())
                .then(d => mostrarResultado('Usuário ID 1', d));
        }

        function listarProjetos() {
            fetch('api/projetos.php')
                .then(r => r.json())
                .then(d => mostrarResultado('Projetos', d));
        }

        function criarProjeto() {
            const dados = {
                nome: 'Projeto Exemplo',
                descricao: 'API teste',
                data_inicio: '2025-08-01',
                data_fim: '2025-08-30'
            };

            fetch('/projetos', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(dados)
            })
            .then(r => r.json())
            .then(d => mostrarResultado('Projeto criado', d));
        }

        function buscarProjeto() {
            fetch('/projetos?id=1')
                .then(r => r.json())
                .then(d => mostrarResultado('Projeto ID 1', d));
        }

        function listarTarefas() {
            fetch('/tarefas')
                .then(r => r.json())
                .then(d => mostrarResultado('Tarefas', d));
        }

        function criarTarefa() {
            const dados = {
                titulo: 'Tarefa Teste',
                descricao: 'Descrição da tarefa',
                status: 'pendente',
                prioridade: 'alta',
                data_vencimento: '2025-08-10',
                projeto_id: 1,
                usuario_id: 1
            };

            fetch('/tarefas', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(dados)
            })
            .then(r => r.json())
            .then(d => mostrarResultado('Tarefa criada', d));
        }

        function buscarTarefa() {
            fetch('/tarefas?id=1')
                .then(r => r.json())
                .then(d => mostrarResultado('Tarefa ID 1', d));
        }

        function mostrarResultado(titulo, dados) {
            document.getElementById('resultado').innerHTML = 
                `<h3>${titulo}:</h3><pre>${JSON.stringify(dados, null, 2)}</pre>`;
        }
    </script>
</body>
</html>
<style>
    body { font-family: Arial; margin: 20px; }
    button { padding: 10px; margin: 5px; cursor: pointer; }
    .resultado { background: #f0f0f0; padding: 10px; margin: 10px 0; }
</style>